<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Login</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen">

<div class="bg-white p-6 rounded-lg shadow-lg w-80">
  <h2 class="text-xl font-bold text-center mb-4">Shop Inventory Login</h2>

  <input id="username" class="border w-full p-2 mb-2" placeholder="Username">
  <input id="password" class="border w-full p-2 mb-4" placeholder="Password" type="password">

  <button onclick="login()" class="bg-blue-600 text-white w-full p-2 rounded">Login</button>
  <p id="msg" class="text-red-600 text-center mt-2"></p>
</div>

<script>
async function login(){
  const res = await fetch("/api/login", {
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body:JSON.stringify({
      username: username.value,
      password: password.value
    })
  });

  const data = await res.json();
  msg.innerText = data.message || "";

  if (data.token) {
    localStorage.setItem("token", data.token);
    localStorage.setItem("role", data.role);
    window.location.href = "dashboard.html";  // <<< go to dashboard
  }
}
</script>

</body>
</html>
